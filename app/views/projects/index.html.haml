%h1 Approved Projects

%hr Projects Approved for Student Application

.wdn-main.maincontent#maincontent
  - if @projects.empty?
    %p No approved projects now.
  - else
    = form_tag(manage_projects_path, method: "post") do
      = render 'shared/error_messages'
      %table.display.cool#projects
        %thead
          %tr
            %th{style: 'text-align: center'}
              = check_box_tag 'checkAll', ""
            %th Project Name
            %th Sponsor Name
            %th Semester
            %th Instructors
            %th Initial Capacity
            %th Proposal
            %th Status
            %th
            %th
        %tbody
          -@projects.each do |p|
            %tr
              %td{style: 'text-align: center'}= check_box_tag 'project[]', p.id
              %td
                %a{ href: project_path(p.id) }= p.name
              %td
                %a{href: sponsor_path(p.sponsor_id)}= Sponsor.find(p.sponsor_id).full_name
              %td= p.semester
              %td
                -if p.instructors.empty?
                  None
                -else
                  -p.instructors.each_with_index do |ins, n|
                    %a{href: instructor_path(ins.id)}= ins.full_name
                    -if n != p.instructors.size - 1
                      %br
              %td= p.initial_capacity
              %td
                - if p.proposal_file_name != "#{p.name}-Proposal"
                  %a{href: "#{p.proposal.url}", title: "#{p.proposal_file_name}"}= truncate(p.proposal_file_name, :length => 20, :omission => '...')
                - else
                  No Proposal
              %td
                - if p.active
                  Approved
              %td
              %td
                = button_to "delete", delete_projects_path(:id => p.id), :method => :post
      %section.wdn-grid-set
      - if current_user.instructor? || current_user.admin?
        %div{style:"float: left"}
          %span{style: 'font-size: 25px;'} &#8627;
          = select_tag 'option', options_for_select(@approve_project_manage_options.collect {|p| [ p['label'], p['value'] ] }), {style: "width: auto"}
          = submit_tag 'submit', {style: 'font-size: 10px !important', confirm: 'Are you confirm the option?', title: "Submit selected projects.", class: "tooltip"}
          //= submit_tag 'activate', {style: 'font-size: 10px !important; background: rgb(56, 185, 108)', confirm: 'Are you sure you want to move selected projects to active?', title: "activate selected projects.", class: "tooltip"}
          //= submit_tag 'archive', {style: 'font-size: 10px !important; background: rgb(95, 129, 202)', confirm: 'Are you sure you want to archive the selected projects?', title: "Archive projects, then it will disappear and show in the past projects.", class: "tooltip"}
          //= submit_tag 'delete', {style: 'font-size: 10px !important; background: rgb(224, 95, 84)', confirm: 'Are you confirm to delete selected projects?', title: "Delete selected projects.", class: "tooltip"}